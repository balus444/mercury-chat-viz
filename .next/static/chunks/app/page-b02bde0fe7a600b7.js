(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{14078:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>eL});var r=s(95155),a=s(12115),l=s(1978),n=s(60760),i=s(34477);let o=(0,i.createServerReference)("7f877859ac633fb8a666525869ee11da05e8dcaddb",i.callServer,void 0,i.findSourceMapURL,"generateQuery"),d=(0,i.createServerReference)("7f9eadbf1f6f5b4112acf0f0b9340f60b113edfab2",i.callServer,void 0,i.findSourceMapURL,"runGenerateSQLQuery"),c=(0,i.createServerReference)("7f3c43f8be5add242c38a2a717443b7f28c63cd71b",i.callServer,void 0,i.findSourceMapURL,"generateChartConfig");var u=s(51154),m=s(56671),f=s(81284),x=s(74466),h=s(52596),p=s(39688);function g(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,p.QP)((0,h.$)(t))}let v=(0,x.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),b=a.forwardRef((e,t)=>{let{className:s,variant:a,...l}=e;return(0,r.jsx)("div",{ref:t,role:"alert",className:g(v({variant:a}),s),...l})});b.displayName="Alert",a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("h5",{ref:t,className:g("mb-1 font-medium leading-none tracking-tight",s),...a})}).displayName="AlertTitle";let j=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:g("text-sm [&_p]:leading-relaxed",s),...a})});j.displayName="AlertDescription";let y=()=>(0,r.jsx)("div",{className:"bg-muted p-4 mt-auto",children:(0,r.jsxs)(b,{className:"bg-muted text-muted-foreground border-0",children:[(0,r.jsx)(f.A,{className:"h-4 w-4 text-primary"}),(0,r.jsx)(j,{children:"Mercury Genie is your intelligent assistant for portfolio management, enabling natural language queries across your investment data. Explore client portfolios, track investments, and analyze performance with simple conversational questions."})]})});var N=s(3401),w=s(94754),k=s(96025),S=s(16238),C=s(24026),R=s(83394),_=s(93504),K=s(21374),L=s(99445),A=s(62341),T=s(8782),q=s(34e3),F=s(54811),O=s(83540),U=s(94517);let D={light:"",dark:".dark"},E=a.createContext(null);function P(){let e=a.useContext(E);if(!e)throw Error("useChart must be used within a <ChartContainer />");return e}let Q=a.forwardRef((e,t)=>{let{id:s,className:l,children:n,config:i,...o}=e,d=a.useId(),c="chart-".concat(s||d.replace(/:/g,""));return(0,r.jsx)(E.Provider,{value:{config:i},children:(0,r.jsxs)("div",{"data-chart":c,ref:t,className:g("flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none",l),...o,children:[(0,r.jsx)(z,{id:c,config:i}),(0,r.jsx)(O.u,{children:n})]})})});Q.displayName="Chart";let z=e=>{let{id:t,config:s}=e,a=Object.entries(s).filter(e=>{let[t,s]=e;return s.theme||s.color});return a.length?(0,r.jsx)("style",{dangerouslySetInnerHTML:{__html:Object.entries(D).map(e=>{let[s,r]=e;return"\n".concat(r," [data-chart=").concat(t,"] {\n").concat(a.map(e=>{var t;let[r,a]=e,l=(null===(t=a.theme)||void 0===t?void 0:t[s])||a.color;return l?"  --color-".concat(r,": ").concat(l,";"):null}).join("\n"),"\n}\n")}).join("\n")}}):null},M=U.m,B=a.forwardRef((e,t)=>{let{active:s,payload:l,className:n,indicator:i="dot",hideLabel:o=!1,hideIndicator:d=!1,label:c,labelFormatter:u,labelClassName:m,formatter:f,color:x,nameKey:h,labelKey:p}=e,{config:v}=P(),b=a.useMemo(()=>{var e;if(o||!(null==l?void 0:l.length))return null;let[t]=l,s="".concat(p||t.dataKey||t.name||"value"),a=G(v,t,s),n=p||"string"!=typeof c?null==a?void 0:a.label:(null===(e=v[c])||void 0===e?void 0:e.label)||c;return u?(0,r.jsx)("div",{className:g("font-medium",m),children:u(n,l)}):n?(0,r.jsx)("div",{className:g("font-medium",m),children:n}):null},[c,u,l,o,m,v,p]);if(!s||!(null==l?void 0:l.length))return null;let j=1===l.length&&"dot"!==i;return(0,r.jsxs)("div",{ref:t,className:g("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",n),children:[j?null:b,(0,r.jsx)("div",{className:"grid gap-1.5",children:l.map((e,t)=>{let s="".concat(h||e.name||e.dataKey||"value"),a=G(v,e,s),l=x||e.payload.fill||e.color;return(0,r.jsx)("div",{className:g("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground","dot"===i&&"items-center"),children:f&&(null==e?void 0:e.value)!==void 0&&e.name?f(e.value,e.name,e,t,e.payload):(0,r.jsxs)(r.Fragment,{children:[(null==a?void 0:a.icon)?(0,r.jsx)(a.icon,{}):!d&&(0,r.jsx)("div",{className:g("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":"dot"===i,"w-1":"line"===i,"w-0 border-[1.5px] border-dashed bg-transparent":"dashed"===i,"my-0.5":j&&"dashed"===i}),style:{"--color-bg":l,"--color-border":l}}),(0,r.jsxs)("div",{className:g("flex flex-1 justify-between leading-none",j?"items-end":"items-center"),children:[(0,r.jsxs)("div",{className:"grid gap-1.5",children:[j?b:null,(0,r.jsx)("span",{className:"text-muted-foreground",children:(null==a?void 0:a.label)||e.name})]}),e.value&&(0,r.jsx)("span",{className:"font-mono font-medium tabular-nums text-foreground",children:e.value.toLocaleString()})]})]})},e.dataKey)})})]})});function G(e,t,s){if("object"!=typeof t||null===t)return;let r="payload"in t&&"object"==typeof t.payload&&null!==t.payload?t.payload:void 0,a=s;return s in t&&"string"==typeof t[s]?a=t[s]:r&&s in r&&"string"==typeof r[s]&&(a=r[s]),a in e?e[a]:e[s]}B.displayName="ChartTooltip",C.s,a.forwardRef((e,t)=>{let{className:s,hideIcon:a=!1,payload:l,verticalAlign:n="bottom",nameKey:i}=e,{config:o}=P();return(null==l?void 0:l.length)?(0,r.jsx)("div",{ref:t,className:g("flex items-center justify-center gap-4","top"===n?"pb-3":"pt-3",s),children:l.map(e=>{let t="".concat(i||e.dataKey||"value"),s=G(o,e,t);return(0,r.jsxs)("div",{className:g("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[(null==s?void 0:s.icon)&&!a?(0,r.jsx)(s.icon,{}):(0,r.jsx)("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:e.color}}),null==s?void 0:s.label]},e.value)})}):null}).displayName="ChartLegend";var V=s(60379);function H(e){return e.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}let I=["hsl(var(--chart-1))","hsl(var(--chart-2))","hsl(var(--chart-3))","hsl(var(--chart-4))","hsl(var(--chart-5))","hsl(var(--chart-6))","hsl(var(--chart-7))","hsl(var(--chart-8))"];function J(e){let{chartData:t,chartConfig:s}=e;return(0,r.jsxs)("div",{className:"w-full flex flex-col justify-center items-center",children:[(0,r.jsx)("h2",{className:"text-lg font-bold mb-2",children:s.title}),s&&t.length>0&&(0,r.jsx)(Q,{config:s.yKeys.reduce((e,t,s)=>(e[t]={label:t,color:I[s%I.length]},e),{}),className:"h-[320px] w-full",children:(()=>{var e,a;if(!t||!s)return(0,r.jsx)("div",{children:"No chart data"});switch(e=t=t.map(e=>{let t={};for(let[s,r]of Object.entries(e))t[s]=isNaN(Number(r))?r:Number(r);return t}),t="bar"===(a=s.type)||"pie"===a?e.length<=8?e:e.slice(0,20):e,s.type){case"bar":return(0,r.jsxs)(N.E,{data:t,children:[(0,r.jsx)(w.d,{strokeDasharray:"3 3"}),(0,r.jsx)(k.W,{dataKey:s.xKey,children:(0,r.jsx)(V.J,{value:H(s.xKey),offset:0,position:"insideBottom"})}),(0,r.jsx)(S.h,{children:(0,r.jsx)(V.J,{value:H(s.yKeys[0]),angle:-90,position:"insideLeft"})}),(0,r.jsx)(M,{content:(0,r.jsx)(B,{})}),s.legend&&(0,r.jsx)(C.s,{}),s.yKeys.map((e,t)=>(0,r.jsx)(R.y,{dataKey:e,fill:I[t%I.length]},e))]});case"line":let{data:l,xAxisField:n,lineFields:i}=function(e,t){let{xKey:s,lineCategories:r,measurementColumn:a}=t,l=Object.keys(e[0]),n=null!=s?s:"year",i=l.find(t=>null==r?void 0:r.includes(e[0][t]))||"",o=Array.from(new Set(e.map(e=>String(e[n])))).map(t=>{let s={[n]:t};return null==r||r.forEach(r=>{let l=e.find(e=>String(e[n])===t&&String(e[i])===r);s[r]=l?l[null!=a?a:""]:null}),s});return o.sort((e,t)=>Number(e[n])-Number(t[n])),{data:o,xAxisField:n,lineFields:null!=r?r:[]}}(t,s),o=s.multipleLines&&s.measurementColumn&&s.yKeys.includes(s.measurementColumn);return(0,r.jsxs)(_.b,{data:o?l:t,children:[(0,r.jsx)(w.d,{strokeDasharray:"3 3"}),(0,r.jsx)(k.W,{dataKey:s.xKey,children:(0,r.jsx)(V.J,{value:H(o?n:s.xKey),offset:0,position:"insideBottom"})}),(0,r.jsx)(S.h,{children:(0,r.jsx)(V.J,{value:H(s.yKeys[0]),angle:-90,position:"insideLeft"})}),(0,r.jsx)(M,{content:(0,r.jsx)(B,{})}),s.legend&&(0,r.jsx)(C.s,{}),o?i.map((e,t)=>(0,r.jsx)(K.N,{type:"monotone",dataKey:e,stroke:I[t%I.length]},e)):s.yKeys.map((e,t)=>(0,r.jsx)(K.N,{type:"monotone",dataKey:e,stroke:I[t%I.length]},e))]});case"area":return(0,r.jsxs)(L.Q,{data:t,children:[(0,r.jsx)(w.d,{strokeDasharray:"3 3"}),(0,r.jsx)(k.W,{dataKey:s.xKey}),(0,r.jsx)(S.h,{}),(0,r.jsx)(M,{content:(0,r.jsx)(B,{})}),s.legend&&(0,r.jsx)(C.s,{}),s.yKeys.map((e,t)=>(0,r.jsx)(A.G,{type:"monotone",dataKey:e,fill:I[t%I.length],stroke:I[t%I.length]},e))]});case"pie":return(0,r.jsxs)(T.r,{children:[(0,r.jsx)(q.F,{data:t,dataKey:s.yKeys[0],nameKey:s.xKey,cx:"50%",cy:"50%",outerRadius:120,children:t.map((e,t)=>(0,r.jsx)(F.f,{fill:I[t%I.length]},"cell-".concat(t)))}),(0,r.jsx)(M,{content:(0,r.jsx)(B,{})}),s.legend&&(0,r.jsx)(C.s,{})]});default:return(0,r.jsxs)("div",{children:["Unsupported chart type: ",s.type]})}})()}),(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsx)("p",{className:"mt-4 text-sm",children:s.description}),(0,r.jsx)("p",{className:"mt-4 text-sm",children:s.takeaway})]})]})}function $(e){let{className:t,...s}=e;return(0,r.jsx)("div",{className:g("animate-pulse rounded-md bg-muted",t),...s})}function W(){return(0,r.jsxs)("div",{className:"flex flex-col space-y-2 w-full",children:[(0,r.jsx)("div",{className:"w-full flex items-center justify-center",children:(0,r.jsx)($,{className:"h-[28px] w-72 rounded-xl"})}),(0,r.jsx)($,{className:"h-[300px] w-full rounded-xl"}),(0,r.jsx)("div",{className:"w-full flex justify-center items-center",children:(0,r.jsx)($,{className:"h-4 w-20"})}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)($,{className:"h-4 w-full"}),(0,r.jsx)($,{className:"h-4 w-[450px]"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)($,{className:"h-4 w-full"}),(0,r.jsx)($,{className:"h-4 w-[350px]"})]})]})}let X=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("table",{ref:t,className:g("w-full caption-bottom text-sm",s),...a})});X.displayName="Table";let Y=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("thead",{ref:t,className:g("[&_tr]:border-b",s),...a})});Y.displayName="TableHeader";let Z=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("tbody",{ref:t,className:g("[&_tr:last-child]:border-0",s),...a})});Z.displayName="TableBody",a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("tfoot",{ref:t,className:g("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...a})}).displayName="TableFooter";let ee=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("tr",{ref:t,className:g("border-b border-border transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...a})});ee.displayName="TableRow";let et=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("th",{ref:t,className:g("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s),...a})});et.displayName="TableHead";let es=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("td",{ref:t,className:g("p-4 align-middle [&:has([role=checkbox])]:pr-0",s),...a})});es.displayName="TableCell",a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("caption",{ref:t,className:g("mt-4 text-sm text-muted-foreground",s),...a})}).displayName="TableCaption";var er=s(56049);let ea=er.bL,el=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(er.B8,{ref:t,className:g("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...a})});el.displayName=er.B8.displayName;let en=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(er.l9,{ref:t,className:g("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...a})});en.displayName=er.l9.displayName;let ei=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(er.UC,{ref:t,className:g("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...a})});ei.displayName=er.UC.displayName;let eo=e=>{let{results:t,columns:s,chartConfig:a}=e,l=e=>e.split("_").map((e,t)=>0===t?e.charAt(0).toUpperCase()+e.slice(1):e).join(" "),n=(e,t)=>{if(e.toLowerCase().includes("valuation")){let e=parseFloat(t);if(isNaN(e))return"";let s=e.toFixed(2).replace(/\.?0+$/,"");return"$".concat(s,"B")}if(e.toLowerCase().includes("rate")){let e=parseFloat(t);if(isNaN(e))return"";let s=(100*e).toFixed(2);return"".concat(s,"%")}return t instanceof Date?t.toLocaleDateString():String(t)};return(0,r.jsx)("div",{className:"flex-grow flex flex-col",children:(0,r.jsxs)(ea,{defaultValue:"table",className:"w-full flex-grow flex flex-col",children:[(0,r.jsxs)(el,{className:"grid w-full grid-cols-2",children:[(0,r.jsx)(en,{value:"table",children:"Table"}),(0,r.jsx)(en,{value:"charts",disabled:Object.keys(t[0]||{}).length<=1||t.length<2,children:"Chart"})]}),(0,r.jsx)(ei,{value:"table",className:"flex-grow",children:(0,r.jsx)("div",{className:"sm:min-h-[10px] relative",children:(0,r.jsxs)(X,{className:"min-w-full divide-y divide-border",children:[(0,r.jsx)(Y,{className:"bg-secondary sticky top-0 shadow-sm",children:(0,r.jsx)(ee,{children:s.map((e,t)=>(0,r.jsx)(et,{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:l(e)},t))})}),(0,r.jsx)(Z,{className:"bg-card divide-y divide-border",children:t.map((e,t)=>(0,r.jsx)(ee,{className:"hover:bg-muted",children:s.map((t,s)=>(0,r.jsx)(es,{className:"px-6 py-4 whitespace-nowrap text-sm text-foreground",children:n(t,e[t])},s))},t))})]})})}),(0,r.jsx)(ei,{value:"charts",className:"flex-grow overflow-auto",children:(0,r.jsx)("div",{className:"mt-4",children:a&&t.length>0?(0,r.jsx)(J,{chartData:t,chartConfig:a}):(0,r.jsx)(W,{})})})]})})};var ed=s(99708);let ec=(0,x.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),eu=a.forwardRef((e,t)=>{let{className:s,variant:a,size:l,asChild:n=!1,...i}=e,o=n?ed.DX:"button";return(0,r.jsx)(o,{className:g(ec({variant:a,size:l,className:s})),ref:t,...i})});eu.displayName="Button";let em=e=>{let{handleSuggestionClick:t}=e;return(0,r.jsxs)(l.P.div,{initial:{opacity:0},animate:{opacity:1},layout:!0,exit:{opacity:0},className:"h-full overflow-y-auto",children:[(0,r.jsx)("h2",{className:"text-lg sm:text-xl font-semibold text-foreground mb-4",children:"Try these queries:"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:[{desktop:"Show me top 5 portfolios by total value",mobile:"Top portfolios"},{desktop:"List top 3 clients with highest portfolio values",mobile:"Top clients"},{desktop:"Show distribution of risk profiles across clients",mobile:"Risk profiles"},{desktop:"Compare average portfolio values by risk level",mobile:"Risk vs Value"},{desktop:"Show total investments by asset type",mobile:"Asset types"},{desktop:"List portfolios created in the last 30 days",mobile:"New portfolios"},{desktop:"Show clients grouped by their financial goals",mobile:"Goals"},{desktop:"Compare market value across different portfolio types",mobile:"Portfolio types"},{desktop:"Show average investment allocation by asset type",mobile:"Allocations"},{desktop:"List clients with portfolios above $1M in value",mobile:"High value"},{desktop:"Show investment distribution by risk level",mobile:"Risk dist."}].map((e,s)=>(0,r.jsxs)(eu,{className:s>5?"hidden sm:inline-block":"",type:"button",variant:"outline",onClick:()=>t(e.desktop),children:[(0,r.jsx)("span",{className:"sm:hidden",children:e.mobile}),(0,r.jsx)("span",{className:"hidden sm:inline",children:e.desktop})]},s))})]},"suggestions")};var ef=s(87942);let ex=ef.Kq,eh=ef.bL,ep=ef.l9,eg=a.forwardRef((e,t)=>{let{className:s,sideOffset:a=4,...l}=e;return(0,r.jsx)(ef.UC,{ref:t,sideOffset:a,className:g("z-50 overflow-hidden rounded-md border border-border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...l})});function ev(e){let{query:t,queryExplanations:s}=e,a=function(e,t){let s=[],r=0;return t.map(t=>({...t,index:e.indexOf(t.section)})).filter(e=>-1!==e.index).sort((e,t)=>e.index-t.index).forEach(t=>{t.index>r&&s.push({text:e.slice(r,t.index)}),s.push({text:t.section,explanation:t.explanation}),r=t.index+t.section.length}),r<e.length&&s.push({text:e.slice(r)}),s}(t,s);return(0,r.jsx)("div",{className:"font-mono bg-muted rounded-lg overflow-x-auto",children:a.map((e,t)=>(0,r.jsx)("span",{children:e.explanation?(0,r.jsx)(ex,{children:(0,r.jsxs)(eh,{children:[(0,r.jsx)(ep,{asChild:!0,children:(0,r.jsx)("span",{className:"inline-block hover:bg-primary/20 transition-colors duration-200 ease-in-out rounded-sm px-1 cursor-help",children:e.text})}),(0,r.jsx)(eg,{side:"top",avoidCollisions:!0,className:"max-w-xl font-sans",children:(0,r.jsx)("p",{className:"whitespace-normal",children:e.explanation})})]})}):e.text},t))})}eg.displayName=ef.UC.displayName;let eb=(0,i.createServerReference)("7f050c4eca53f5d22438a42d20915933a1a9c2f48c",i.callServer,void 0,i.findSourceMapURL,"explainQuery");var ej=s(94788);let ey=e=>{let{activeQuery:t,inputValue:s}=e,[l,n]=(0,a.useState)(),[i,o]=(0,a.useState)(!1),[d,c]=(0,a.useState)(t.length>100),m=async()=>{c(!0),o(!0);let{explanations:e}=await eb(s,t);n(e),o(!1)};return 0===t.length?null:(0,r.jsxs)("div",{className:"mb-4 relative group",children:[(0,r.jsx)("div",{className:"bg-muted rounded-md p-4 ".concat(d?"":"text-muted-foreground"),children:(0,r.jsx)("div",{className:"font-mono text-sm",children:d?l&&l.length>0?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ev,{query:t,queryExplanations:l}),(0,r.jsx)("p",{className:"font-sans mt-4 text-base",children:"Generated explanation! Hover over different parts of the SQL query to see explanations."})]}):(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"",children:t}),(0,r.jsx)(eu,{variant:"ghost",size:"icon",onClick:m,className:"h-fit hover:text-muted-foreground hidden sm:inline-block","aria-label":"Explain query",disabled:i,children:i?(0,r.jsx)(u.A,{className:"h-10 w-10 p-2 animate-spin "}):(0,r.jsx)(ej.A,{className:"h-10 w-10 p-2 "})})]}):(0,r.jsxs)("span",{children:[t.slice(0,100),t.length>100?"...":""]})})}),!d&&(0,r.jsx)(eu,{variant:"secondary",size:"sm",onClick:()=>c(!0),className:"absolute inset-0 h-full opacity-0 group-hover:opacity-100 transition-opacity duration-300 ease-in-out",children:"Show full query"})]})};var eN=s(47924);let ew=a.forwardRef((e,t)=>{let{className:s,type:a,...l}=e;return(0,r.jsx)("input",{type:a,className:g("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...l})});ew.displayName="Input";let ek=e=>{let{handleSubmit:t,inputValue:s,setInputValue:a,submitted:l,handleClear:n}=e;return(0,r.jsx)("form",{onSubmit:async e=>{e.preventDefault(),await t()},className:"mb-6",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center space-y-4 sm:space-y-0 sm:space-x-4",children:[(0,r.jsxs)("div",{className:"relative flex-grow",children:[(0,r.jsx)(ew,{type:"text",placeholder:"Ask about portfolios, clients & investments...",value:s,onChange:e=>a(e.target.value),className:"pr-10 text-base"}),(0,r.jsx)(eN.A,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground"})]}),(0,r.jsx)("div",{className:"flex sm:flex-row items-center justify-center gap-2",children:l?(0,r.jsx)(eu,{type:"button",variant:"outline",onClick:n,className:"w-full sm:w-auto",children:"Clear"}):(0,r.jsx)(eu,{type:"submit",className:"w-full sm:w-auto",children:"Send"})})]})})};var eS=s(53311),eC=s(93509),eR=s(62098),e_=s(51362);let eK=e=>{let{handleClear:t}=e,{theme:s,setTheme:a}=(0,e_.D)();return(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)("h1",{className:"text-2xl sm:text-3xl font-bold text-foreground flex items-center gap-2 cursor-pointer",onClick:()=>t(),children:["Mercury Genie ",(0,r.jsx)(eS.A,{className:"h-6 w-6 text-primary"})]}),(0,r.jsx)("div",{className:"flex items-center justify-center space-x-2",children:(0,r.jsxs)(eu,{variant:"ghost",size:"icon",onClick:()=>a("light"===s?"dark":"light"),children:["dark"===s?(0,r.jsx)(eC.A,{className:"h-5 w-5"}):(0,r.jsx)(eR.A,{className:"h-5 w-5"}),(0,r.jsx)("span",{className:"sr-only",children:"Toggle theme"})]})})]})};function eL(){let[e,t]=(0,a.useState)(""),[s,i]=(0,a.useState)(!1),[f,x]=(0,a.useState)([]),[h,p]=(0,a.useState)([]),[g,v]=(0,a.useState)(""),[b,j]=(0,a.useState)(!1),[N,w]=(0,a.useState)(1),[k,S]=(0,a.useState)(null),C=async t=>{let s=null!=t?t:e;if(0!==e.length||t){_(),s.trim()&&i(!0),j(!0),w(1),v("");try{let e=await o(s);if(void 0===e){m.o.error("An error occurred. Please try again."),j(!1);return}v(e),w(2);let t=await d(e),r=t.length>0?Object.keys(t[0]):[];x(t),p(r),j(!1);let a=await c(t,s);S(a.config)}catch(e){m.o.error("An error occurred. Please try again."),j(!1)}}},R=async e=>{t(e);try{await C(e)}catch(e){m.o.error("An error occurred. Please try again.")}},_=()=>{v(""),x([]),p([]),S(null)},K=()=>{i(!1),t(""),_()};return(0,r.jsx)("div",{className:"bg-neutral-50 dark:bg-neutral-900 flex items-start justify-center p-0 sm:p-8",children:(0,r.jsx)("div",{className:"w-full max-w-4xl min-h-dvh sm:min-h-0 flex flex-col ",children:(0,r.jsxs)(l.P.div,{className:"bg-card rounded-xl sm:border sm:border-border flex-grow flex flex-col",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,ease:"easeOut"},children:[(0,r.jsxs)("div",{className:"p-6 sm:p-8 flex flex-col flex-grow",children:[(0,r.jsx)(eK,{handleClear:K}),(0,r.jsx)(ek,{handleClear:K,handleSubmit:C,inputValue:e,setInputValue:t,submitted:s}),(0,r.jsx)("div",{id:"main-container",className:"flex-grow flex flex-col sm:min-h-[420px]",children:(0,r.jsx)("div",{className:"flex-grow h-full",children:(0,r.jsx)(n.N,{mode:"wait",children:s?(0,r.jsxs)(l.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},layout:!0,className:"sm:h-full min-h-[400px] flex flex-col",children:[g.length>0&&(0,r.jsx)(ey,{activeQuery:g,inputValue:e}),b?(0,r.jsx)("div",{className:"relative flex-grow flex items-center justify-center",children:(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-4",children:[(0,r.jsx)(u.A,{className:"h-12 w-12 animate-spin text-muted-foreground"}),(0,r.jsx)("p",{className:"text-foreground",children:1===N?"Generating SQL query...":"Running SQL query..."})]})}):0===f.length?(0,r.jsx)("div",{className:"flex-grow flex items-center justify-center",children:(0,r.jsx)("p",{className:"text-center text-muted-foreground",children:"No results found."})}):(0,r.jsx)(eo,{results:f,chartConfig:k,columns:h})]},"results"):(0,r.jsx)(em,{handleSuggestionClick:R})})})})]}),(0,r.jsx)(y,{})]})})})}},76861:(e,t,s)=>{Promise.resolve().then(s.bind(s,14078))}},e=>{var t=t=>e(e.s=t);e.O(0,[486,413,441,684,358],()=>t(76861)),_N_E=e.O()}]);